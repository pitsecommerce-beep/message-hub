import{u as p,r as E,j as e,M as P,B as g,G as I,s as T,a as h,d as F,b as M,g as L,c as z,e as A,f as d,h as R,i as B}from"./index-CEkNgELi.js";import{u as v,t as w,o as N,s as m}from"./types-BT89ZYJ-.js";import{I as u}from"./input-DcbaJggM.js";import{L as x}from"./label-3qLALYJI.js";import{T as G,a as k,b as f,c as b}from"./tabs-DFJh9Gpf.js";import"./index-DF1d7nOt.js";import"./index-BDvAr04x.js";import"./index-CMB1mmzH.js";import"./index-lvnVN3aE.js";const H=N({email:m().email("Correo inválido"),password:m().min(1,"Ingresa tu contraseña")}),q=N({name:m().min(2,"Ingresa tu nombre completo"),email:m().email("Correo inválido"),password:m().min(6,"Mínimo 6 caracteres")});function y(i){return{"auth/user-not-found":"No existe una cuenta con este correo.","auth/wrong-password":"Contraseña incorrecta.","auth/invalid-credential":"Correo o contraseña incorrectos.","auth/email-already-in-use":"Este correo ya está registrado.","auth/too-many-requests":"Demasiados intentos. Espera unos minutos.","auth/popup-blocked":"El navegador bloqueó la ventana emergente.","auth/popup-closed-by-user":""}[i]??"Error de autenticación. Intenta de nuevo."}function D(){const i=p(),{register:r,handleSubmit:c,getValues:s,formState:{errors:t,isSubmitting:o}}=v({resolver:w(H)});async function a(l){try{await B(h,l.email,l.password),i("/")}catch(C){const S=C.code??"",j=y(S);j&&d.error(j)}}async function n(){const l=s("email");if(!l){d.info("Ingresa tu correo antes de solicitar recuperación.");return}try{await R(h,l),d.success(`Enlace enviado a ${l}. Revisa tu bandeja de entrada.`)}catch{d.error("No se pudo enviar el correo de recuperación.")}}return e.jsxs("form",{onSubmit:c(a),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(x,{htmlFor:"loginEmail",children:"Correo electrónico"}),e.jsx(u,{id:"loginEmail",type:"email",placeholder:"tu@correo.com",autoComplete:"email",...r("email")}),t.email&&e.jsx("p",{className:"text-xs text-red-400",children:t.email.message})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(x,{htmlFor:"loginPassword",children:"Contraseña"}),e.jsx(u,{id:"loginPassword",type:"password",placeholder:"••••••••",autoComplete:"current-password",...r("password")}),t.password&&e.jsx("p",{className:"text-xs text-red-400",children:t.password.message})]}),e.jsx("button",{type:"button",onClick:n,className:"text-xs text-brand-400 hover:text-brand-300 hover:underline",children:"¿Olvidaste tu contraseña?"}),e.jsx(g,{type:"submit",className:"w-full",loading:o,children:"Iniciar Sesión"})]})}function V(){const i=p(),{register:r,handleSubmit:c,formState:{errors:s,isSubmitting:t}}=v({resolver:w(q)});async function o(a){sessionStorage.setItem("pendingRegistration",JSON.stringify(a)),i("/onboarding")}return e.jsxs("form",{onSubmit:c(o),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(x,{htmlFor:"registerName",children:"Nombre completo"}),e.jsx(u,{id:"registerName",type:"text",placeholder:"Juan Pérez",autoComplete:"name",...r("name")}),s.name&&e.jsx("p",{className:"text-xs text-red-400",children:s.name.message})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(x,{htmlFor:"registerEmail",children:"Correo electrónico"}),e.jsx(u,{id:"registerEmail",type:"email",placeholder:"tu@correo.com",autoComplete:"email",...r("email")}),s.email&&e.jsx("p",{className:"text-xs text-red-400",children:s.email.message})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(x,{htmlFor:"registerPassword",children:"Contraseña"}),e.jsx(u,{id:"registerPassword",type:"password",placeholder:"Mínimo 6 caracteres",autoComplete:"new-password",...r("password")}),s.password&&e.jsx("p",{className:"text-xs text-red-400",children:s.password.message})]}),e.jsx(g,{type:"submit",className:"w-full",loading:t,children:"Crear Cuenta"})]})}function Z(){const i=p(),[r,c]=E.useState(!1);async function s(){var t;c(!0);try{const o=new I,a=await T(h,o),n=F(M,"users",a.user.uid);(await L(n)).exists()?i("/"):(await z(n,{name:a.user.displayName??((t=a.user.email)==null?void 0:t.split("@")[0])??"Usuario",email:a.user.email,createdAt:A(),onboarded:!1}),i("/onboarding"))}catch(o){const a=o.code??"",n=y(a);n&&d.error(n)}finally{c(!1)}}return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-950 px-4",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-72 h-72 bg-brand-600/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-600/8 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"w-full max-w-md relative",children:[e.jsxs("div",{className:"flex flex-col items-center gap-3 mb-8",children:[e.jsx("div",{className:"h-12 w-12 rounded-2xl bg-brand-600 flex items-center justify-center shadow-lg shadow-brand-600/25",children:e.jsx(P,{size:24,className:"text-white"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"MessageHub"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Plataforma de Mensajería Unificada"})]})]}),e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 backdrop-blur-sm p-6 shadow-2xl",children:[e.jsxs(G,{defaultValue:"login",children:[e.jsxs(k,{className:"w-full mb-6",children:[e.jsx(f,{value:"login",className:"flex-1",children:"Iniciar Sesión"}),e.jsx(f,{value:"register",className:"flex-1",children:"Crear Cuenta"})]}),e.jsx(b,{value:"login",children:e.jsx(D,{})}),e.jsx(b,{value:"register",children:e.jsx(V,{})})]}),e.jsxs("div",{className:"relative my-5",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-white/10"})}),e.jsx("div",{className:"relative flex justify-center text-xs",children:e.jsx("span",{className:"bg-gray-900/80 px-2 text-gray-500",children:"o continúa con"})})]}),e.jsxs(g,{variant:"outline",className:"w-full",onClick:s,loading:r,children:[e.jsxs("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]})]})]})]})}export{Z as default};

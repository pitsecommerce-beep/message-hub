import{u as C}from"./useQuery-D47Ue_YD.js";import{C as u,f as s,F as w,e as l,o as h,b as d,t as S,d as y,H as F,p as b,q,D as T,w as E}from"./index-CEkNgELi.js";import{u as m}from"./useMutation-COeJoQaC.js";import{e as i,o as n,a,s as e,l as P,n as c,b as A,c as p}from"./types-BT89ZYJ-.js";function O(t){return C({queryKey:["contacts",t],queryFn:async()=>t?(await b(q(h(d,"contacts"),E("orgId","==",t),T("createdAt","desc")))).docs.map(o=>({id:o.id,...o.data()})):[],enabled:!!t})}function x(t){const r=u();return m({mutationFn:async o=>{if(!t)throw new Error("No orgId");await w(h(d,"contacts"),{...o,orgId:t,createdAt:l()})},onSuccess:()=>{r.invalidateQueries({queryKey:["contacts",t]}),s.success("Contacto creado")},onError:o=>s.error(o.message)})}function G(t){const r=u();return m({mutationFn:async({id:o,...g})=>{await S(y(d,"contacts",o),{...g,updatedAt:l()})},onSuccess:()=>{r.invalidateQueries({queryKey:["contacts",t]}),s.success("Contacto actualizado")},onError:o=>s.error(o.message)})}function R(t){const r=u();return m({mutationFn:async o=>{await F(y(d,"contacts",o))},onSuccess:()=>{r.invalidateQueries({queryKey:["contacts",t]}),s.success("Contacto eliminado")},onError:o=>s.error(o.message)})}function j(t){const r=u();return m({mutationFn:async({id:o,stage:g})=>{await S(y(d,"contacts",o),{funnelStage:g,funnelUpdatedAt:l(),updatedAt:l()})},onSuccess:()=>{r.invalidateQueries({queryKey:["contacts",t]})},onError:o=>s.error(o.message)})}const v=i(["admin","manager","agent"]);n({uid:e(),name:e(),email:e().email(),role:v,orgId:e(),createdAt:a()});n({id:e(),name:e(),inviteCode:e(),brandName:e().optional(),logoUrl:e().optional(),iconUrl:e().optional(),createdAt:a()});const I=i(["curioso","cotizando","pago_pendiente","orden_pendiente","entregado","atencion_inmediata"]),H=[{id:"curioso",name:"Curioso",color:"#3B82F6"},{id:"cotizando",name:"Cotizando",color:"#F59E0B"},{id:"pago_pendiente",name:"Pago Pendiente",color:"#EF4444"},{id:"orden_pendiente",name:"Orden Pendiente",color:"#8B5CF6"},{id:"entregado",name:"Entregado",color:"#10B981"},{id:"atencion_inmediata",name:"Atenci√≥n Inmediata",color:"#EC4899"}];n({id:e(),name:e(),company:e().optional(),phone:e().optional(),email:e().email().optional().or(P("")),rfc:e().optional(),address:e().optional(),notes:e().optional(),funnelStage:I.optional(),funnelUpdatedAt:a().optional(),orgId:e(),createdAt:a(),updatedAt:a().optional()});const f=i(["whatsapp","instagram","messenger"]);n({id:e(),contactId:e(),contactName:e(),contactPhone:e().optional(),platform:f,orgId:e(),assignedTo:e().optional(),aiEnabled:A().optional(),funnelStage:I.optional(),lastMessage:e().optional(),lastMessageAt:a().optional(),unreadCount:c().optional(),createdAt:a()});n({id:e(),convId:e(),text:e(),role:i(["user","agent","ai"]),senderName:e().optional(),timestamp:a(),platform:f.optional()});const N=i(["pendiente","procesando","enviado","entregado","cancelado"]),U=n({description:e(),quantity:c(),unitPrice:c(),total:c()});n({id:e(),orderNumber:e(),contactId:e(),contactName:e(),conversationId:e().optional(),orgId:e(),status:N,items:p(U).optional(),total:c().optional(),notes:e().optional(),createdAt:a(),updatedAt:a().optional()});const K=i(["stripe","mercadopago"]);n({id:e(),convId:e(),orderId:e().optional(),amount:c(),description:e(),gateway:K,status:i(["pending","paid","cancelled"]),trackingRef:e(),orgId:e(),createdAt:a(),paidAt:a().optional()});const _=i(["openai","anthropic","custom"]);n({id:e(),name:e(),provider:_,model:e(),apiKey:e().optional(),endpoint:e().optional(),systemPrompt:e(),knowledgeBases:p(e()).optional(),channels:p(f).optional(),active:A(),orgId:e(),createdAt:a()});n({id:e(),name:e(),description:e().optional(),orgId:e(),rowCount:c().optional(),columns:p(e()).optional(),createdAt:a(),updatedAt:a().optional()});const B=i(["whatsapp","instagram","messenger"]),D=i(["meta","evolution"]);n({id:e(),platform:B,method:D.optional(),connected:A(),phoneNumberId:e().optional(),accessToken:e().optional(),verifyToken:e().optional(),webhookUrl:e().optional(),evolutionApiUrl:e().optional(),evolutionApiKey:e().optional(),evolutionInstanceName:e().optional(),evolutionPhone:e().optional(),orgId:e(),updatedAt:a().optional()});n({uid:e(),name:e(),email:e().email(),role:v,orgId:e(),createdAt:a()});export{H as F,O as a,x as b,G as c,R as d,j as u};

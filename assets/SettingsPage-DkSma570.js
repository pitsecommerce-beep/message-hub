import{A as z,r as D,j as e,B as f,X as G,t as n,d,f as t,af as j,ag as b,ah as P,ai as R,b as m,aj as M}from"./index-CEkNgELi.js";import{u as O,t as T,o as A,s as V}from"./types-BT89ZYJ-.js";import{I as $}from"./input-DcbaJggM.js";import{L as N}from"./label-3qLALYJI.js";import{C as y,a as v,b as w,c as k,d as U}from"./card-C5Xft823.js";import{U as F}from"./upload-SgqJjYKu.js";import{B as H}from"./building-2-NKLHoJag.js";import"./index-DF1d7nOt.js";const J=A({brandName:V().min(1,"Ingresa el nombre de tu marca")});function ee(){const{userData:l,organization:s,setOrganization:o}=z(),a=(l==null?void 0:l.orgId)??(s==null?void 0:s.id),[x,g]=D.useState(!1),{register:S,handleSubmit:L,formState:{errors:p,isSubmitting:B}}=O({resolver:T(J),defaultValues:{brandName:(s==null?void 0:s.brandName)??(s==null?void 0:s.name)??""}});async function C(r){a&&(await n(d(m,"organizations",a),{brandName:r.brandName}),s&&o({...s,brandName:r.brandName}),t.success("Nombre actualizado"))}async function I(r){var h;const c=(h=r.target.files)==null?void 0:h[0];if(!(!c||!a)){if(c.size>2*1024*1024){t.error("El archivo supera 2MB");return}g(!0);try{const i=j(b,`organizations/${a}/logo`);await P(i,c);const u=await R(i);await n(d(m,"organizations",a),{logoUrl:u}),s&&o({...s,logoUrl:u}),t.success("Logo actualizado")}catch(i){t.error(i.message)}finally{g(!1)}}}async function E(){if(!(!a||!(s!=null&&s.logoUrl)))try{const r=j(b,`organizations/${a}/logo`);await M(r).catch(()=>{}),await n(d(m,"organizations",a),{logoUrl:null}),s&&o({...s,logoUrl:void 0}),t.success("Logo eliminado")}catch(r){t.error(r.message)}}return e.jsxs("div",{className:"max-w-2xl space-y-6",children:[e.jsxs(y,{children:[e.jsxs(v,{children:[e.jsx(w,{children:"Branding"}),e.jsx(k,{children:"Personaliza la apariencia de tu organización"})]}),e.jsxs(U,{className:"space-y-5",children:[e.jsxs("form",{onSubmit:L(C),className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1 space-y-1.5",children:[e.jsx(N,{children:"Nombre de la marca"}),e.jsx($,{placeholder:(s==null?void 0:s.name)??"Mi Empresa",...S("brandName")}),p.brandName&&e.jsx("p",{className:"text-xs text-red-400",children:p.brandName.message})]}),e.jsx(f,{type:"submit",className:"self-end",loading:B,children:"Guardar"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Logotipo"}),s!=null&&s.logoUrl?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:s.logoUrl,alt:"Logo",className:"h-12 w-auto rounded-lg border border-white/15 object-contain bg-white/5 p-1"}),e.jsxs(f,{variant:"outline",size:"sm",className:"text-red-400 border-red-500/30 hover:bg-red-500/10",onClick:E,children:[e.jsx(G,{size:13})," Eliminar"]})]}):e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-lg border border-white/15 bg-white/5 hover:bg-white/8 text-sm text-gray-300 transition-colors",children:[e.jsx(F,{size:14}),x?"Subiendo...":"Subir logo"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"PNG, JPG, SVG · máx 2MB"}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:I,disabled:x})]})]})]})]}),e.jsxs(y,{children:[e.jsx(v,{children:e.jsx(w,{children:"Información de la Organización"})}),e.jsxs(U,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 rounded-xl bg-white/5 px-4 py-3",children:[e.jsx(H,{size:16,className:"text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Nombre"}),e.jsx("p",{className:"text-sm font-medium text-white",children:(s==null?void 0:s.name)??"—"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 rounded-xl bg-white/5 px-4 py-3",children:[e.jsx("div",{className:"text-gray-500 text-sm",children:"ID"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ID de organización"}),e.jsx("p",{className:"text-sm font-mono text-gray-400",children:a??"—"})]})]})]})]})]})}export{ee as default};
